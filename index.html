<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="dns-prefetch" href="https://www.gstatic.com">
    <link rel="preconnect" href="https://www.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <meta name="description" content="SGS Coaching Institute in Patiala offers top education for classes 6-12 and competitive exams with interactive quizzes and expert tutoring.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2d8cf0">
    <meta property="og:image" content="https://sgscoaching.github.io/sgs-coaching-website/Logo.png">
    <!-- Performance optimizations -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
    <link rel="preload" href="Logo.png" as="image">
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="SGS Coaching Institute | Expert Education in Patiala">
    <meta name="twitter:description" content="Transform your academic journey with SGS Coaching Institute. Expert tutoring for classes 6-12 and competitive exams in Patiala.">
    <meta name="twitter:image" content="https://sgscoaching.github.io/sgs-coaching-website/logo.png">
    <meta name="google-site-verification" content="aeb4d8691dd06fa2">
    <title>SGS Coaching Institute | Expert Education in Patiala | Classes 6-12 & Competitive Exams</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: #ffffff;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 1rem 0;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-section img {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(45, 140, 240, 0.3);
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #2d8cf0, #1e3a8a);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            text-decoration: none;
            color: #2c3e50;
            font-weight: 500;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-links a:hover {
            color: #2d8cf0;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: #2d8cf0;
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .cta-button {
            background: linear-gradient(135deg, #2d8cf0, #1e3a8a);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(45, 140, 240, 0.3);
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(45, 140, 240, 0.4);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
            padding-top: 80px; /* Add padding to account for fixed header */
        }

        /* Floating study characters / shapes */
        .hero-floating {
            position: absolute;
            border-radius: 999px;
            background: rgba(255,255,255,0.12);
            box-shadow: 0 10px 40px rgba(15,23,42,0.25);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: #fefcbf;
            animation: float 8s ease-in-out infinite;
        }

        .hero-floating.student {
            width: 80px;
            height: 80px;
            top: 18%;
            right: 12%;
            animation-delay: 0s;
        }

        .hero-floating.book {
            width: 70px;
            height: 70px;
            bottom: 16%;
            left: 8%;
            animation-delay: 1.5s;
        }

        .hero-floating.light {
            width: 65px;
            height: 65px;
            bottom: 25%;
            right: 20%;
            animation-delay: 3s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); }
            25% { transform: translateY(-12px) translateX(4px); }
            50% { transform: translateY(0) translateX(8px); }
            75% { transform: translateY(10px) translateX(-4px); }
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><polygon fill="%23ffffff" fill-opacity="0.05" points="0,1000 1000,1000 1000,0 0,300"/></svg>');
        }

        .hero-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .hero-content h1 {
            font-size: 3.5rem;
            font-weight: 800;
            color: white;
            margin-bottom: 1.5rem;
            line-height: 1.2;
        }

        .hero-content .highlight {
            background: linear-gradient(135deg, #ffeaa7, #fab1a0);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero-content p {
            font-size: 1.2rem;
            color: rgba(255,255,255,0.9);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .hero-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 2rem;
        }

        .hero-buttons .btn-secondary {
            flex: 1;
            min-width: 150px;
            text-align: center;
        }

        .hero-buttons .btn-primary {
            flex: 1;
            min-width: 150px;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
            padding: 1rem 2rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 184, 148, 0.3);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 184, 148, 0.4);
        }

        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: white;
            padding: 1rem 2rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border: 2px solid rgba(255,255,255,0.3);
            backdrop-filter: blur(10px);
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-3px);
        }

        .hero-visual {
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .hero-card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #ffeaa7;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: rgba(255,255,255,0.8);
            font-size: 0.9rem;
        }

        /* Syllabus highlight section */
        .syllabus-highlight {
            background: radial-gradient(circle at top left, #e0f2fe 0, #f9fafb 50%, #eef2ff 100%);
            padding: 5rem 0;
        }

        .syllabus-highlight .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: minmax(0,1.3fr) minmax(0,1fr);
            gap: 3rem;
            align-items: center;
        }

        .syllabus-heading {
            font-size: 2.2rem;
            font-weight: 800;
            color: #0f172a;
            margin-bottom: 0.75rem;
        }

        .syllabus-subtext {
            color: #4b5563;
            max-width: 520px;
            margin-bottom: 1.5rem;
        }

        .syllabus-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.75rem;
        }

        .syllabus-tag {
            padding: 0.35rem 0.8rem;
            border-radius: 999px;
            font-size: 0.85rem;
            background: #e0f2fe;
            color: #1d4ed8;
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
        }

        .syllabus-tag.board {
            background: #fee2e2;
            color: #b91c1c;
        }

        .syllabus-cards {
            display: grid;
            grid-template-columns: repeat(3, minmax(0,1fr));
            gap: 1rem;
        }

        .syllabus-mini-card {
            background: white;
            border-radius: 1rem;
            padding: 1rem;
            box-shadow: 0 10px 25px rgba(15,23,42,0.08);
            border: 1px solid #e5e7eb;
            cursor: pointer;
            transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease;
            opacity: 0;
            transform: translateY(25px);
        }

        .syllabus-mini-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 16px 35px rgba(37,99,235,0.18);
            border-color: #2563eb;
        }

        .syllabus-mini-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .syllabus-mini-card h3 {
            font-size: 0.98rem;
            margin-bottom: 0.25rem;
            color: #111827;
        }

        .syllabus-mini-card p {
            font-size: 0.85rem;
            color: #6b7280;
        }

        .syllabus-cta {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            align-items: center;
        }

        .syllabus-note {
            font-size: 0.85rem;
            color: #6b7280;
        }

        .syllabus-preview {
            position: relative;
        }

        .syllabus-preview-card {
            background: white;
            border-radius: 1.5rem;
            padding: 1.5rem;
            box-shadow: 0 20px 45px rgba(15,23,42,0.18);
            border: 1px solid #dbeafe;
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(25px);
            transition: transform 0.4s ease, opacity 0.4s ease;
        }

        .syllabus-preview-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.3rem 0.7rem;
            border-radius: 999px;
            font-size: 0.8rem;
            background: #eff6ff;
            color: #1d4ed8;
            margin-bottom: 0.75rem;
        }

        .syllabus-preview-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .syllabus-preview h3 {
            font-size: 1.05rem;
            margin-bottom: 0.5rem;
            color: #111827;
        }

        .syllabus-preview ul {
            padding-left: 1.1rem;
            margin: 0.4rem 0 0.8rem;
            font-size: 0.85rem;
            color: #4b5563;
        }

        .syllabus-preview-pill-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.4rem;
        }

        .syllabus-pill {
            padding: 0.25rem 0.7rem;
            border-radius: 999px;
            font-size: 0.78rem;
            background: #f9fafb;
            border: 1px dashed #cbd5f5;
            color: #4b5563;
        }

        .syllabus-glow {
            position: absolute;
            width: 160px;
            height: 160px;
            border-radius: 999px;
            background: radial-gradient(circle, rgba(59,130,246,0.25), transparent 60%);
            top: -40px;
            right: -40px;
            pointer-events: none;
        }

        /* Features Section */
        .features {
            padding: 6rem 0;
            background: #f8fafc;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .section-header {
            text-align: center;
            margin-bottom: 4rem;
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 1rem;
        }

        .section-subtitle {
            font-size: 1.1rem;
            color: #64748b;
            max-width: 600px;
            margin: 0 auto;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            background: white;
            padding: 2.5rem;
            border-radius: 16px;
            box-shadow: 0 4px 25px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            border: 1px solid #e2e8f0;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 35px rgba(45, 140, 240, 0.15);
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #2d8cf0, #1e3a8a);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            color: white;
            font-size: 1.5rem;
        }

        .feature-card h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 1rem;
        }

        .feature-card p {
            color: #64748b;
            line-height: 1.6;
        }

        /* Courses Section */
        .courses {
            padding: 6rem 0;
            background: white;
        }

        .courses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .course-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 2.5rem;
            color: white;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .course-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            transform: translate(30px, -30px);
        }

        .course-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
        }

        .course-card h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            position: relative;
            z-index: 2;
        }

        .course-subjects {
            background: rgba(255,255,255,0.1);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            position: relative;
            z-index: 2;
        }

        .course-card p {
            margin-bottom: 1.5rem;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }

        .course-features {
            list-style: none;
            position: relative;
            z-index: 2;
        }

        .course-features li {
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .course-features li::before {
            content: '‚úì';
            background: rgba(255,255,255,0.2);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        /* Quiz CTA Section */
        .quiz-cta {
            background: linear-gradient(135deg, #00b894, #00a085);
            padding: 4rem 0;
            text-align: center;
            color: white;
        }

        .quiz-cta h2 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .quiz-cta p {
            font-size: 1.1rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        /* Top Rankers Section */
        .top-rankers {
            padding: 6rem 0;
            background: #f8fafc;
        }

        .rankers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .ranker-card {
            background: white;
            padding: 1.5rem;
            border-radius: 16px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .ranker-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .ranker-card.rank-1 {
            border-color: #ffd700;
            background: linear-gradient(135deg, #fffbf0, #fff);
        }

        .ranker-card.rank-2 {
            border-color: #c0c0c0;
            background: linear-gradient(135deg, #f8f9fa, #fff);
        }

        .ranker-card.rank-3 {
            border-color: #cd7f32;
            background: linear-gradient(135deg, #fdf6f0, #fff);
        }

        /* Testimonials */
        .testimonials {
            padding: 6rem 0;
            background: white;
            position: relative;
            overflow: hidden;
        }

        .testimonials-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 60px;
        }

        .testimonials-slider {
            width: 100%;
            overflow: hidden;
            position: relative;
        }

        .testimonials-track {
            display: flex;
            transition: transform 0.5s ease-in-out;
            will-change: transform;
        }

        .testimonial-slide {
            min-width: 100%;
            padding: 0 15px;
            box-sizing: border-box;
            flex-shrink: 0;
            transition: opacity 0.3s ease;
        }

        .testimonial-slide.active {
            opacity: 1;
        }

        .testimonials-grid {
            display: flex;
            width: 100%;
            justify-content: center;
        }

        /* Navigation Arrows */
        .testimonial-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            background: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            z-index: 10;
            transition: all 0.3s ease;
        }

        .testimonial-nav:hover {
            background: #2d8cf0;
            color: white;
            transform: translateY(-50%) scale(1.1);
        }

        .testimonial-nav.prev {
            left: 0;
        }

        .testimonial-nav.next {
            right: 0;
        }

        /* Dots Navigation */
        .testimonial-dots {
            display: flex;
            justify-content: center;
            margin-top: 2rem;
            gap: 10px;
        }

        .testimonial-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e2e8f0;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            padding: 0;
        }

        .testimonial-dot.active {
            background: #2d8cf0;
            transform: scale(1.2);
        }

        @media (max-width: 768px) {
            .testimonials-container {
                padding: 0 40px;
            }

            .testimonial-nav {
                width: 40px;
                height: 40px;
            }
            
            .testimonial-card {
                max-width: 100%;
                margin: 0 15px;
            }
        }

        @media (max-width: 480px) {
            .testimonials-container {
                padding: 0 20px;
            }
        }

        .testimonial-card {
            background: #f8fafc;
            padding: 2rem;
            border-radius: 16px;
            position: relative;
            border: 1px solid #e2e8f0;
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .testimonial-card::before {
            content: '"';
            font-size: 4rem;
            color: #2d8cf0;
            position: absolute;
            top: -10px;
            left: 20px;
            font-family: serif;
        }

        .testimonial-text {
            font-style: italic;
            margin-bottom: 1.5rem;
            margin-top: 1rem;
            color: #475569;
        }

        .testimonial-author {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .author-avatar {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #2d8cf0, #1e3a8a);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .author-info h4 {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 0.25rem;
        }

        .author-info p {
            color: #64748b;
            font-size: 0.9rem;
        }

        /* Contact Section */
        .contact {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            padding: 4rem 0;
            color: white;
            text-align: center;
        }

        .contact-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .contact-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .contact-icon {
            width: 60px;
            height: 60px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }

        .social-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: white;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .social-btn.whatsapp {
            background: #25D366;
        }

        .social-btn.instagram {
            background: linear-gradient(45deg, #E4405F, #833AB4);
        }

        .social-btn.facebook {
            background: #1877F2;
        }

        .social-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        /* Footer */
        footer {
            background: #1a1a1a;
            color: white;
            text-align: center;
            padding: 2rem 0;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hero-container {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 2rem;
            }

            .hero-content h1 {
                font-size: 2.5rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .hero-buttons {
                justify-content: center;
            }

            .courses-grid,
            .features-grid,
            .testimonials-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .nav-container {
                padding: 0 1rem;
            }

            .container {
                padding: 0 1rem;
            }

            .syllabus-highlight .container {
                padding: 0 1rem;
                grid-template-columns: minmax(0,1fr);
            }

            .syllabus-cards {
                grid-template-columns: repeat(2,minmax(0,1fr));
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.6s ease-out;
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="logo-section">
                <img src="Logo.png" alt="SGS Coaching Logo" loading="eager" fetchpriority="high" onerror="this.style.display='none'">
                <div class="logo-text">SGS Coaching</div>
            </div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#courses">Courses</a></li>
                <li><a href="#features">Features</a></li>
                <li><a href="#testimonials">Reviews</a></li>
                <li><a href="#contact">Contact</a></li>
                <li><a href="syllabus.html">Syllabus</a></li>
                <li><a href="mock-test.html" target="_blank">Mock Test</a></li>
            </ul>
            <a href="quizzes.html" class="cta-button">Take Quiz</a>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-container">
            <div class="hero-content fade-in-up">
                <h1>Transform Your <span class="highlight">Academic Journey</span> with Expert Guidance</h1>
                <p>Join SGS Coaching Institute in Patiala and unlock your potential with our comprehensive education programs for classes 6-12 and competitive exams.</p>
                <div class="hero-buttons">
                    <a href="quizzes.html" class="btn-primary">
                        <i class="fas fa-play"></i>
                        Start Quiz Now
                    </a>
                    <a href="mock-test.html" class="btn-secondary" style="background: #f39c12; border-color: #e67e22;">
                        <i class="fas fa-tasks"></i>
                        Try Mock Test
                    </a>
                    <a href="#courses" class="btn-secondary">
                        <i class="fas fa-book"></i>
                        Explore Courses
                    </a>
                </div>
            </div>
            <div class="hero-visual fade-in-up">
                <div class="hero-floating student">üßë‚Äçüéì</div>
                <div class="hero-floating book">üìò</div>
                <div class="hero-floating light">üí°</div>
                <div class="hero-card">
                    <h3 style="color: white; margin-bottom: 1rem; text-align: center;">üöÄ Why Choose Us?</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-number">üìö</div>
                            <div class="stat-label">Comprehensive Study Material</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">üéØ</div>
                            <div class="stat-label">Targeted Test Series</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">üë®‚Äçüè´</div>
                            <div class="stat-label">Expert Faculty</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">üí°</div>
                            <div class="stat-label">Smart Learning</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    

    

    <!-- Syllabus Highlight Section -->
    <section class="syllabus-highlight" id="syllabus-highlight">
        <div class="container">
            <div>
                <h2 class="syllabus-heading">See Your CBSE Syllabus at a Glance</h2>
                <p class="syllabus-subtext">
                    Quickly check what is important for your class and board exam. We‚Äôve organised syllabus,
                    exam pattern and NCERT book links so you don‚Äôt waste time searching.
                </p>
                <div class="syllabus-tags">
                    <span class="syllabus-tag"><i class="fas fa-check-circle"></i> Classes 6‚Äì8</span>
                    <span class="syllabus-tag"><i class="fas fa-check-circle"></i> Class 9</span>
                    <span class="syllabus-tag board"><i class="fas fa-star"></i> Class 10 Board Focus</span>
                    <span class="syllabus-tag"><i class="fas fa-check-circle"></i> Classes 11‚Äì12</span>
                </div>
                <div class="syllabus-cards">
                    <div class="syllabus-mini-card" onclick="window.location.href='syllabus.html#class6-8'">
                        <h3>Foundation (6‚Äì8)</h3>
                        <p>All subjects with NCERT focus and school exam pattern.</p>
                    </div>
                    <div class="syllabus-mini-card" onclick="window.location.href='syllabus.html#class9'">
                        <h3>Class 9 Roadmap</h3>
                        <p>80 + 20 pattern and concepts that build your Class 10 base.</p>
                    </div>
                    <div class="syllabus-mini-card" onclick="window.location.href='syllabus.html#class10'">
                        <h3>Class 10 Board Plan</h3>
                        <p>Exam style, marking scheme and how final marksheet is prepared.</p>
                    </div>
                </div>
                <div class="syllabus-cta" style="margin-top:1.75rem;">
                    <a href="syllabus.html" class="btn-primary">
                        <i class="fas fa-book-open"></i>
                        Open Full Syllabus Page
                    </a>
                    <p class="syllabus-note">
                        Includes direct links to CBSE official syllabus and NCERT book PDFs.
                    </p>
                </div>
            </div>
            <div class="syllabus-preview">
                <div class="syllabus-preview-card">
                    <div class="syllabus-preview-badge">
                        <i class="fas fa-clipboard-list"></i> Live Preview ‚Äì Class 10
                    </div>
                    <h3>Board Exam Snapshot</h3>
                    <ul>
                        <li>5 main subjects (English, Hindi, Maths, Science, SST)</li>
                        <li>Each subject: 80 marks theory + 20 marks internal</li>
                        <li>NCERT based questions with mix of MCQ, short & long answer</li>
                    </ul>
                    <div class="syllabus-preview-pill-row">
                        <span class="syllabus-pill">Marksheet explanation</span>
                        <span class="syllabus-pill">Grade system (A1‚ÄìE)</span>
                        <span class="syllabus-pill">Previous year focus</span>
                    </div>
                    <div class="syllabus-glow"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Why Choose SGS Coaching?</h2>
                <p class="section-subtitle">Experience excellence in education with our unique teaching methodology and comprehensive support system.</p>
            </div>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h3>Interactive Quiz System</h3>
                    <p>Test your knowledge with our comprehensive quiz portal featuring timed assessments and instant rankings to track your progress.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-chalkboard-teacher"></i>
                    </div>
                    <h3>Expert Faculty</h3>
                    <p>Learn from experienced teachers who understand student needs and provide personalized attention to ensure academic success.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <h3>Proven Results</h3>
                    <p>Our students consistently achieve top ranks in board exams and competitive tests with our proven teaching methods.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3>Flexible Timings</h3>
                    <p>Study at your convenient time with flexible batch timings and weekend classes available for working students.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3>Small Batch Size</h3>
                    <p>Benefit from personalized attention with small batch sizes ensuring every student gets individual focus and care.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h3>Digital Learning</h3>
                    <p>Access study materials and practice quizzes online anytime, anywhere with our modern digital learning platform.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Mock Test Section -->
    <section class="mock-test" style="background: #f9fafc; padding: 6rem 0;">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Ace Your Competitive Exams</h2>
                <p class="section-subtitle">Prepare with our realistic mock tests designed for SSC CGL, RRB, and other competitive exams</p>
            </div>
            <div class="features-grid">
                <div class="feature-card" style="background: #fff; border-radius: 12px; padding: 2rem; box-shadow: 0 4px 20px rgba(0,0,0,0.05); transition: all 0.3s ease;">
                    <div style="background: #f8f9fa; width: 60px; height: 60px; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem;">
                        <i class="fas fa-stopwatch" style="font-size: 1.8rem; color: #2d8cf0;"></i>
                    </div>
                    <h3 style="text-align: center; margin-bottom: 1rem; color: #2c3e50;">Timed Tests</h3>
                    <p style="text-align: center; color: #64748b; line-height: 1.6; margin-bottom: 1.5rem;">Practice with time-bound tests that simulate real exam conditions to improve your speed and accuracy.</p>
                    <a href="mock-test.html" class="btn-primary" style="display: block; text-align: center; margin: 0 auto; max-width: 180px; background: #2d8cf0; color: white; padding: 0.8rem 1.5rem; border-radius: 50px; text-decoration: none; font-weight: 600; transition: all 0.3s ease;">
                        Start Test <i class="fas fa-arrow-right" style="margin-left: 8px;"></i>
                    </a>
                </div>
                <div class="feature-card" style="background: #fff; border-radius: 12px; padding: 2rem; box-shadow: 0 4px 20px rgba(0,0,0,0.05); transition: all 0.3s ease;">
                    <div style="background: #f8f9fa; width: 60px; height: 60px; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem;">
                        <i class="fas fa-chart-line" style="font-size: 1.8rem; color: #10b981;"></i>
                    </div>
                    <h3 style="text-align: center; margin-bottom: 1rem; color: #2c3e50;">Performance Analytics</h3>
                    <p style="text-align: center; color: #64748b; line-height: 1.6; margin-bottom: 1.5rem;">Get detailed performance reports with section-wise analysis to identify your strengths and weaknesses.</p>
                    <a href="mock-test.html" class="btn-primary" style="display: block; text-align: center; margin: 0 auto; max-width: 180px; background: #10b981; color: white; padding: 0.8rem 1.5rem; border-radius: 50px; text-decoration: none; font-weight: 600; transition: all 0.3s ease;">
                        View Analytics <i class="fas fa-arrow-right" style="margin-left: 8px;"></i>
                    </a>
                </div>
                <div class="feature-card" style="background: #fff; border-radius: 12px; padding: 2rem; box-shadow: 0 4px 20px rgba(0,0,0,0.05); transition: all 0.3s ease;">
                    <div style="background: #f8f9fa; width: 60px; height: 60px; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem;">
                        <i class="fas fa-book-open" style="font-size: 1.8rem; color: #f59e0b;"></i>
                    </div>
                    <h3 style="text-align: center; margin-bottom: 1rem; color: #2c3e50;">Comprehensive Solutions</h3>
                    <p style="text-align: center; color: #64748b; line-height: 1.6; margin-bottom: 1.5rem;">Access detailed solutions and explanations for every question to enhance your understanding.</p>
                    <a href="mock-test.html" class="btn-primary" style="display: block; text-align: center; margin: 0 auto; max-width: 180px; background: #f59e0b; color: white; padding: 0.8rem 1.5rem; border-radius: 50px; text-decoration: none; font-weight: 600; transition: all 0.3s ease;">
                        View Solutions <i class="fas fa-arrow-right" style="margin-left: 8px;"></i>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Courses Section -->
    <section class="courses" id="courses">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Our Comprehensive Courses</h2>
                <p class="section-subtitle">Choose from our expertly designed courses tailored for different academic levels and career goals.</p>
            </div>
            <div class="courses-grid">
                <div class="course-card">
                    <h3>üìö Classes 6-10</h3>
                    <div class="course-subjects">All Subjects Covered</div>
                    <p>Complete foundation building with comprehensive curriculum covering all subjects for middle and high school students.</p>
                    <ul class="course-features">
                        <li>NCERT curriculum based teaching</li>
                        <li>Regular assessments and feedback</li>
                        <li>Interactive learning methods</li>
                        <li>Homework support and guidance</li>
                    </ul>
                </div>
                <div class="course-card">
                    <h3>üéì Classes 11-12</h3>
                    <div class="course-subjects">Physics ‚Ä¢ Mathematics</div>
                    <p>Advanced courses designed for board exam excellence and competitive exam preparation with practical sessions.</p>
                    <ul class="course-features">
                        <li>Board exam focused preparation</li>
                        <li>Conceptual clarity with practicals</li>
                        <li>Previous year papers practice</li>
                        <li>JEE/NEET foundation building</li>
                    </ul>
                </div>
                <div class="course-card">
                    <h3>üèÜ Competitive Exams</h3>
                    <div class="course-subjects">Constable ‚Ä¢ Excise ‚Ä¢ Patwari ‚Ä¢ SSC CHSL</div>
                    <p>Intensive training programs with mock tests and strategic preparation for government job competitive examinations.</p>
                    <ul class="course-features">
                        <li>Updated syllabus coverage</li>
                        <li>Mock tests and time management</li>
                        <li>Previous years analysis</li>
                        <li>Interview preparation support</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Quiz CTA Section -->
    <section class="quiz-cta">
        <div class="container">
            <h2>üß† Test Your Knowledge Now!</h2>
            <p>Take our interactive quizzes and see how you rank against other students. Challenge yourself and track your progress!</p>
            <div style="display: flex; gap: 2rem; justify-content: center; margin: 2rem 0; flex-wrap: wrap; color: rgba(255,255,255,0.95); font-size: 1rem;">
                <div style="text-align: center;">
                    <div style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem;">193+</div>
                    <div style="font-size: 0.9rem;">Active Participants</div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem;">üéØ</div>
                    <div style="font-size: 0.9rem;">Chapterwise & Midterm Tests</div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem;">üèÜ</div>
                    <div style="font-size: 0.9rem;">Live Leaderboard</div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem;">üîÑ</div>
                    <div style="font-size: 0.9rem;">Retake & Improve</div>
                </div>
            </div>
            <a href="quizzes.html" class="btn-primary" style="background: white; color: #00b894;">
                <i class="fas fa-rocket"></i>
                Start Quiz Portal
            </a>
        </div>
      <div id="quizForm"></div>
    </section>

    <!-- Top Rankers Section -->
    <section class="top-rankers" id="top-rankers">

<script>
  function displayHomeTopRankers() {
    try {
      // Check if element exists before proceeding
      const container = document.getElementById('homeRankingsList');
      if (!container) {
        // Element doesn't exist, silently return
        return;
      }
      
      // Try to get rankings from localStorage with error handling
      let rankings = [];
      try {
        const storedRankings = localStorage.getItem('rankings');
        if (storedRankings) {
          rankings = JSON.parse(storedRankings);
        }
      } catch (storageError) {
        // Tracking prevention or storage access blocked - silently handle
        console.log('Storage access blocked or unavailable:', storageError.message);
        container.innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; color: #64748b; font-style: italic;">
            Rankings unavailable (storage access restricted).
          </div>
        `;
        return;
      }
      
      if(rankings.length === 0) {
        container.innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; color: #64748b; font-style: italic;">
            No quiz results yet! Be the first to take a quiz.
          </div>
        `;
        return;
      }
      
      // Sort descending by score (number), making sure score is a valid float
      rankings = rankings.filter(r => !isNaN(parseFloat(r.score))).sort((a,b) => parseFloat(b.score) - parseFloat(a.score));
      
      const topRankers = rankings.slice(0, 6);
      container.innerHTML = topRankers.map((r, i) => {
        const colors = ['#ffd700', '#c0c0c0', '#cd7f32']; // Gold, Silver, Bronze
        const medal = i === 0 ? 'ü•á' : i === 1 ? 'ü•à' : i === 2 ? 'ü•â' : 'üèÜ';
        const borderColor = i < 3 ? colors[i] : '#2d8cf0';
        
        const nameWithMobile = (() => {
          // Try to show user name, if mobile inside parentheses available
          if (r.user && r.mobile) return `${r.user} (${r.mobile})`;
          if (r.user) return r.user;
          if (r.mobile) return r.mobile;
          return "Unknown Student";
        })();
        
        return `
          <div style="
            background: white; 
            border-radius: 16px; 
            box-shadow: 0 8px 32px rgba(45, 140, 240, 0.15);
            border: 2px solid ${borderColor};
            padding: 1.5rem;
            color: #374151;
            font-family: 'Inter', sans-serif;
            display: flex; 
            flex-direction: column;
            align-items: center;
            text-align: center;
          ">
            <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">${medal}</div>
            <h3 style="margin: 0; color: #2c3e50; font-weight: 700;">${nameWithMobile}</h3>
            <div style="
              margin-top: 0.5rem; 
              background: linear-gradient(135deg, #2d8cf0, #1e3a8a); 
              color: white; 
              padding: 0.5rem 1rem; 
              border-radius: 20px; 
              font-weight: 600;
              font-size: 1rem;
              width: fit-content;
            ">
              Score: ${parseFloat(r.score).toFixed(2)}%
            </div>
            <p style="margin-top: 1rem; color: #64748b; font-size: 0.9rem;">
              ${r.date}
            </p>
          </div>
        `;
      }).join('');
    } catch (err) {
      console.error('Error loading top rankers:', err);
      const container = document.getElementById('homeRankingsList');
      if (container) {
        container.textContent = 'Unable to load top rankers.';
      }
    }
  }
  document.addEventListener('DOMContentLoaded', displayHomeTopRankers);
</script>
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">üèÜ Top Quiz Performers</h2>
                <p class="section-subtitle">Celebrating our star students who excel in our quiz assessments!</p>
            </div>
            <div id="rankersContainer">
                <div id="loadingRankers" style="text-align: center; padding: 40px; color: #64748b;">
                    <div class="loading"></div>
                    <p style="margin-top: 1rem;">Loading top performers...</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Top Mock Test Performers (Live Leaderboard) -->
    <section class="top-rankers" id="mock-leaderboard" style="background: #f8fafc; padding: 6rem 0;">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">üèÜ Top Mock Test Performers</h2>
                <p class="section-subtitle">Live leaderboard showcasing the best results from our mock tests</p>
            </div>
            <div class="rankers-grid" id="mockLeaderboardList">
                <!-- Filled dynamically from localStorage 'quizSubmissions' -->
            </div>
        </div>
        <script>
            // Store all mock test rankers globally
            let allMockTestRankers = [];
            
            // Cache for mock test leaderboard
            let mockLeaderboardCache = null;
            let mockLeaderboardCacheTime = 0;
            const MOCK_LEADERBOARD_CACHE_DURATION = 3 * 60 * 1000; // 3 minutes
            
            // Helper function to render mock leaderboard
            function renderMockLeaderboard(unique, list) {
                if (!list) return;
                
                // Show only top 3
                const top3 = unique.slice(0, 3);
                
                list.innerHTML = top3.map((s, i) => {
                    const medal = i === 0 ? 'ü•á' : i === 1 ? 'ü•à' : 'ü•â';
                    const borders = ['#ffd700', '#c0c0c0', '#cd7f32'];
                    const borderColor = borders[i];
                    const percent = s.totalQuestions ? ((s.marks / s.totalQuestions) * 100).toFixed(0) : s.marks;
                    const accuracy = s.accuracy ? Math.round(s.accuracy) : percent;
                    const name = s.name || 'Anonymous Student';
                    const sampleBadge = s.isSample ? '<span style="font-size: 0.7rem; background: #fef3c7; color: #92400e; padding: 0.2rem 0.5rem; border-radius: 12px; margin-left: 0.5rem;">Sample</span>' : '';
                    return `
                    <div class="ranker-card rank-${i+1}" style="border-color: ${borderColor};">
                        <div style="font-size: 2rem; margin-bottom: .25rem;">${medal}</div>
                        <h3 style="margin: 0; color: #2c3e50; font-weight: 700; display: flex; align-items: center; justify-content: center; flex-wrap: wrap;">${name}${sampleBadge}</h3>
                        <div style="margin-top: .5rem; display: inline-block; background: linear-gradient(135deg, #2d8cf0, #1e3a8a); color: #fff; padding: .4rem .9rem; border-radius: 999px; font-weight: 600;">
                            Score: ${s.marks}/${s.totalQuestions} (${percent}%)
                        </div>
                        <p style="margin-top: .4rem; color: #64748b; font-size: .9rem;">Accuracy: ${accuracy}%</p>
                    </div>`;
                }).join('');
                
                // Add "See All Rankers" button if there are more than 3
                if (unique.length > 3) {
                    const container = list.parentElement;
                    // Remove existing button if any
                    const existingBtn = container.querySelector('#mockSeeAllBtn');
                    if (existingBtn) existingBtn.remove();
                    
                    const seeAllBtn = document.createElement('div');
                    seeAllBtn.style.textAlign = 'center';
                    seeAllBtn.style.marginTop = '2rem';
                    seeAllBtn.id = 'mockSeeAllBtn';
                    seeAllBtn.innerHTML = `
                        <button onclick="showAllMockTestRankers()" style="
                            background: linear-gradient(135deg, #2d8cf0, #1e3a8a);
                            color: white;
                            padding: 0.75rem 2rem;
                            border: none;
                            border-radius: 50px;
                            font-weight: 600;
                            font-size: 1rem;
                            cursor: pointer;
                            transition: all 0.3s ease;
                            box-shadow: 0 4px 15px rgba(45, 140, 240, 0.3);
                        " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 25px rgba(45, 140, 240, 0.4)';" 
                           onmouseout="this.style.transform='none'; this.style.boxShadow='0 4px 15px rgba(45, 140, 240, 0.3)';">
                            <i class="fas fa-trophy"></i> See All Rankers (${unique.length})
                        </button>
                    `;
                    container.appendChild(seeAllBtn);
                }
            }
            
            async function displayMockLeaderboard() {
                const list = document.getElementById('mockLeaderboardList');
                if (!list) return;
                
                // Check cache first
                const now = Date.now();
                if (mockLeaderboardCache && (now - mockLeaderboardCacheTime < MOCK_LEADERBOARD_CACHE_DURATION)) {
                    renderMockLeaderboard(mockLeaderboardCache, list);
                    return;
                }
                
                try {
                    // Try to fetch from Google Sheets first
                    let sheetsRankings = null;
                    if (typeof fetchMockTestRankingsFromSheets === 'function') {
                        try {
                            sheetsRankings = await fetchMockTestRankingsFromSheets();
                        } catch (e) {
                            console.log('Could not fetch from Google Sheets, using local data:', e);
                        }
                    }
                    
                    // Get local submissions as fallback
                    let submissions = JSON.parse(localStorage.getItem('quizSubmissions')) || [];
                    const list = document.getElementById('mockLeaderboardList');
                    if (!list) return;

                    // Merge with Google Sheets data if available
                    if (sheetsRankings && sheetsRankings.length > 0) {
                        sheetsRankings.forEach(rank => {
                            submissions.push({
                                name: rank.name,
                                mobile: rank.mobile,
                                marks: rank.marks,
                                totalQuestions: rank.totalQuestions,
                                accuracy: rank.accuracy,
                                timestamp: rank.timestamp
                            });
                        });
                    }

                    // Always add sample pre-rankers for display (they'll be filtered if real data exists)
                    const sampleRankers = [
                        { name: 'Aarav Sharma', marks: 48, totalQuestions: 50, accuracy: 96, timestamp: Date.now() - 86400000 * 7, mobile: 'sample1' },
                        { name: 'Priya Patel', marks: 46, totalQuestions: 50, accuracy: 92, timestamp: Date.now() - 86400000 * 6, mobile: 'sample2' },
                        { name: 'Rohan Singh', marks: 45, totalQuestions: 50, accuracy: 90, timestamp: Date.now() - 86400000 * 5, mobile: 'sample3' },
                        { name: 'Ananya Verma', marks: 44, totalQuestions: 50, accuracy: 88, timestamp: Date.now() - 86400000 * 4, mobile: 'sample4' },
                        { name: 'Karan Mehta', marks: 43, totalQuestions: 50, accuracy: 86, timestamp: Date.now() - 86400000 * 3, mobile: 'sample5' }
                    ];
                    // Mark as sample data
                    sampleRankers.forEach(s => s.isSample = true);
                    
                    // If no real submissions, use sample rankers
                    if (submissions.length === 0) {
                        submissions = sampleRankers;
                    } else {
                        // If real submissions exist, still add samples but mark them clearly
                        // This ensures the leaderboard always looks good
                        submissions = [...submissions, ...sampleRankers];
                    }

                    // Sort: higher marks first, then earliest timestamp
                    submissions.sort((a, b) => {
                        if (b.marks !== a.marks) return b.marks - a.marks;
                        return (a.timestamp || 0) - (b.timestamp || 0);
                    });

                    // Remove duplicates based on name + mobile + marks
                    // But prioritize real data over samples
                    const seen = new Set();
                    const unique = [];
                    const samples = [];
                    
                    // Separate real submissions from samples
                    for (const s of submissions) {
                        if (s.isSample) {
                            samples.push(s);
                        } else {
                            const key = `${s.name}_${s.mobile}_${s.marks}`;
                            if (!seen.has(key)) {
                                seen.add(key);
                                unique.push({
                                    ...s,
                                    rank: unique.length + 1
                                });
                            }
                        }
                    }
                    
                    // If no real submissions, use samples
                    if (unique.length === 0) {
                        samples.forEach((s, i) => {
                            unique.push({
                                ...s,
                                rank: i + 1
                            });
                        });
                    }

                    // Store all rankers for "See All" functionality
                    allMockTestRankers = unique;
                    
                    // Update cache
                    mockLeaderboardCache = unique;
                    mockLeaderboardCacheTime = Date.now();
                    
                    // Render leaderboard
                    renderMockLeaderboard(unique, list);
                } catch (e) {
                    console.error('Failed to load mock leaderboard', e);
                    const list = document.getElementById('mockLeaderboardList');
                    if (list) {
                        // Show sample rankers even on error
                        const sampleRankers = [
                            { name: 'Aarav Sharma', marks: 48, totalQuestions: 50, accuracy: 96, timestamp: Date.now() - 86400000 * 7, mobile: 'sample1', isSample: true },
                            { name: 'Priya Patel', marks: 46, totalQuestions: 50, accuracy: 92, timestamp: Date.now() - 86400000 * 6, mobile: 'sample2', isSample: true },
                            { name: 'Rohan Singh', marks: 45, totalQuestions: 50, accuracy: 90, timestamp: Date.now() - 86400000 * 5, mobile: 'sample3', isSample: true }
                        ];
                        sampleRankers.forEach((s, i) => { s.rank = i + 1; });
                        allMockTestRankers = sampleRankers;
                        renderMockLeaderboard(sampleRankers, list);
                    }
                }
            }
            
            // Function to show all mock test rankers in a modal (make it globally accessible)
            window.showAllMockTestRankers = function() {
                if (allMockTestRankers.length === 0) return;
                
                const modal = document.createElement('div');
                modal.id = 'allMockRankersModal';
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.7);
                    z-index: 10000;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 20px;
                    overflow-y: auto;
                `;
                
                const modalContent = document.createElement('div');
                modalContent.style.cssText = `
                    background: white;
                    border-radius: 20px;
                    padding: 2rem;
                    max-width: 900px;
                    width: 100%;
                    max-height: 90vh;
                    overflow-y: auto;
                    position: relative;
                `;
                
                modalContent.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h2 style="margin: 0; color: #2c3e50; font-size: 2rem;">
                            <i class="fas fa-trophy"></i> All Mock Test Rankers
                        </h2>
                        <button onclick="document.getElementById('allMockRankersModal').remove()" style="
                            background: #ef4444;
                            color: white;
                            border: none;
                            border-radius: 50%;
                            width: 40px;
                            height: 40px;
                            font-size: 1.5rem;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                        ">&times;</button>
                    </div>
                    <div class="rankers-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1.5rem;">
                        ${allMockTestRankers.map((s, index) => {
                            const rankClass = index === 0 ? 'rank-1' : index === 1 ? 'rank-2' : index === 2 ? 'rank-3' : '';
                            const medal = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : 'üèÖ';
                            const borderColor = index < 3 ? (index === 0 ? '#ffd700' : index === 1 ? '#c0c0c0' : '#cd7f32') : '#e2e8f0';
                            const percent = s.totalQuestions ? ((s.marks / s.totalQuestions) * 100).toFixed(0) : s.marks;
                            const accuracy = s.accuracy ? Math.round(s.accuracy) : percent;
                            const name = s.name || 'Anonymous Student';
                            const sampleBadge = s.isSample ? '<span style="font-size: 0.7rem; background: #fef3c7; color: #92400e; padding: 0.2rem 0.5rem; border-radius: 12px; margin-left: 0.5rem;">Sample</span>' : '';
                            return `
                                <div class="ranker-card ${rankClass}" style="
                                    background: white;
                                    padding: 1.5rem;
                                    border-radius: 16px;
                                    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
                                    text-align: center;
                                    border: 2px solid ${borderColor};
                                ">
                                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">${medal}</div>
                                    <h3 style="margin: 0; color: #2c3e50; font-weight: 700; font-size: 1.1rem; display: flex; align-items: center; justify-content: center; flex-wrap: wrap;">${name}${sampleBadge}</h3>
                                    <div style="margin-top: 0.5rem; display: inline-block; background: linear-gradient(135deg, #2d8cf0, #1e3a8a); color: #fff; padding: 0.4rem 0.9rem; border-radius: 999px; font-weight: 600;">
                                        Rank #${s.rank}
                                    </div>
                                    <div style="margin-top: 0.5rem; display: inline-block; background: linear-gradient(135deg, #10b981, #059669); color: #fff; padding: 0.4rem 0.9rem; border-radius: 999px; font-weight: 600; font-size: 0.9rem;">
                                        Score: ${s.marks}/${s.totalQuestions} (${percent}%)
                                    </div>
                                    <p style="margin-top: 0.5rem; color: #64748b; font-size: 0.9rem;">Accuracy: ${accuracy}%</p>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
                
                modal.appendChild(modalContent);
                document.body.appendChild(modal);
                
                // Close on outside click
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
            }
            
            document.addEventListener('DOMContentLoaded', displayMockLeaderboard);
        </script>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonials" id="testimonials">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">What Our Students Say</h2>
                <p class="section-subtitle">Real success stories from our students who achieved their dreams with SGS Coaching.</p>
            </div>
            <div class="testimonials-container">
                <button class="testimonial-nav prev" aria-label="Previous testimonial">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="testimonials-slider">
                    <div class="testimonials-track">
                        <!-- Slides will be dynamically inserted here by JavaScript -->
                    </div>
                </div>
                <button class="testimonial-nav next" aria-label="Next testimonial">
                    <i class="fas fa-chevron-right"></i>
                </button>
                <div class="testimonial-dots">
                    <!-- Dots will be dynamically inserted here by JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <!-- Add Review Section -->
    <section class="add-review" style="background: #f8fafc; padding: 4rem 0;">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Share Your Experience</h2>
                <p class="section-subtitle">We'd love to hear about your learning journey with us!</p>
            </div>
            <div class="review-form-container" style="max-width: 800px; margin: 0 auto; background: white; padding: 2rem; border-radius: 16px; box-shadow: 0 4px 15px rgba(0,0,0,0.05);">
                <form id="reviewForm" style="display: grid; gap: 1.5rem;">
                    <div style="display: grid; gap: 0.5rem;">
                        <label for="reviewerName" style="font-weight: 500; color: #2c3e50;">Your Name</label>
                        <input type="text" id="reviewerName" required 
                               style="padding: 0.75rem 1rem; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 1rem;"
                               placeholder="Enter your name">
                    </div>
                    <div style="display: grid; gap: 0.5rem;">
                        <label for="reviewerClass" style="font-weight: 500; color: #2c3e50;">Your Class/Exam</label>
                        <input type="text" id="reviewerClass" required 
                               style="padding: 0.75rem 1rem; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 1rem;"
                               placeholder="E.g., Class 10, SSC CGL, etc.">
                    </div>
                    <div style="display: grid; gap: 0.5rem;">
                        <label style="font-weight: 500; color: #2c3e50; margin-bottom: 0.5rem;">Your Rating</label>
                        <div class="star-rating" style="display: flex; gap: 0.5rem; justify-content: center; margin: 0.5rem 0;">
                            <span class="star" data-rating="1" style="font-size: 1.8rem; color: #e2e8f0; cursor: pointer; transition: color 0.2s; user-select: none;">‚òÖ</span>
                            <span class="star" data-rating="2" style="font-size: 1.8rem; color: #e2e8f0; cursor: pointer; transition: color 0.2s; user-select: none;">‚òÖ</span>
                            <span class="star" data-rating="3" style="font-size: 1.8rem; color: #e2e8f0; cursor: pointer; transition: color 0.2s; user-select: none;">‚òÖ</span>
                            <span class="star" data-rating="4" style="font-size: 1.8rem; color: #e2e8f0; cursor: pointer; transition: color 0.2s; user-select: none;">‚òÖ</span>
                            <span class="star" data-rating="5" style="font-size: 1.8rem; color: #e2e8f0; cursor: pointer; transition: color 0.2s; user-select: none;">‚òÖ</span>
                        </div>
                        <input type="hidden" id="reviewRating" name="rating" value="0" required>
                        <p id="ratingError" style="color: #e53e3e; font-size: 0.85rem; margin: 0.25rem 0 0; text-align: center; display: none;">Please select a rating</p>
                    </div>
                    <div style="display: grid; gap: 0.5rem;">
                        <label for="reviewText" style="font-weight: 500; color: #2c3e50;">Your Review</label>
                        <textarea id="reviewText" rows="4" required 
                                 style="padding: 0.75rem 1rem; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 1rem; resize: vertical; min-height: 120px;"
                                 placeholder="Share your experience with SGS Coaching..."></textarea>
                    </div>
                    <div style="display: flex; justify-content: center; margin-top: 1rem;">
                        <button type="submit" style="background: linear-gradient(135deg, #2d8cf0, #1e3a8a); color: white; border: none; padding: 0.75rem 2rem; border-radius: 50px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;"
                                onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 15px rgba(45, 140, 240, 0.4)';"
                                onmouseout="this.style.transform='none'; this.style.boxShadow='none';">
                            Submit Review
                        </button>
                    </div>
                </form>
                <div id="formSuccess" style="display: none; text-align: center; margin-top: 1.5rem; padding: 1rem; background: #e3f9e5; color: #0a5c36; border-radius: 8px;">
                    <p style="margin: 0;">Thank you for your review! It will be displayed after page refresh.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact" id="contact">
        <div class="container">
            <h2 class="section-title" style="color: white;">Get In Touch With Us</h2>
            <p style="margin-bottom: 2rem;">Ready to start your learning journey? Contact us today!</p>
            
            <div class="contact-content">
                <div class="contact-item">
                    <a href="tel:+918580436681" style="text-decoration: none; color: inherit;">
                        <div class="contact-icon" style="cursor: pointer;" title="Click to call">
                        <i class="fas fa-phone"></i>
                    </div>
                    </a>
                    <h3>Call Us</h3>
                    <p>
                        <a href="tel:+918580436681" style="color: white; text-decoration: none; font-size: 1.1rem; font-weight: 500;">
                            +91 8580436681
                        </a>
                        <br>Available 9 AM - 8 PM
                    </p>
                </div>
                <div class="contact-item">
                    <a href="mailto:sgscoaching0202@gmail.com" style="text-decoration: none; color: inherit;">
                        <div class="contact-icon" style="cursor: pointer;" title="Click to email">
                        <i class="fas fa-envelope"></i>
                    </div>
                    </a>
                    <h3>Email Us</h3>
                    <p>
                        <a href="mailto:sgscoaching0202@gmail.com" style="color: white; text-decoration: none; font-size: 1rem;">
                            sgscoaching0202@gmail.com
                        </a>
                        <br>Quick response guaranteed
                    </p>
                </div>
            </div>

            <div class="social-links">
                <a href="https://chat.whatsapp.com/EmrgBj6r1duEFXn1vrzCOV" target="_blank" class="social-btn whatsapp" title="Join WhatsApp Group">
                    <i class="fab fa-whatsapp"></i>
                </a>
                <a href="https://www.instagram.com/sgscoaching0202?igsh=cXd4a2xsd3R0b2gz" target="_blank" class="social-btn instagram" title="Follow on Instagram">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://www.instagram.com/sgscoaching0202/" target="_blank" class="social-btn facebook" title="Follow Us">
                    <i class="fab fa-facebook-f"></i>
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2024 SGS Coaching Institute, Patiala. All rights reserved. | Empowering students to achieve excellence.</p>
        </div>
    </footer>

    <script>
        // Handles scrolling to anchor links from other pages after dynamic content has loaded
        window.addEventListener('load', () => { // Use 'load' to wait for all resources
            // Use a timeout to ensure scripts like leaderboard rendering have completed
            setTimeout(() => {
                if (window.location.hash) {
                    const targetId = window.location.hash;
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        console.log('Anchor found, scrolling to:', targetId);
                        targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    } else {
                        console.warn('Anchor target not found after delay:', targetId);
                    }
                }
            }, 500); // Increased delay to 500ms for more reliability
        });
    </script>

    <!-- Firebase App (the core Firebase SDK) - Load with defer for better performance -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js" defer></script>
<!-- Add Firebase products that you want to use -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics-compat.js" defer></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js" defer></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js" defer></script>
<script defer>
  // Initialize Firebase after scripts load
  window.addEventListener('DOMContentLoaded', function() {
    if (typeof firebase !== 'undefined') {
      const firebaseConfig = {
        apiKey: "AIzaSyDKMKifbh7XKmD6kqoUpHd0wuPccbYsaZM",
        authDomain: "sgs-quiz-portal.firebaseapp.com",
        projectId: "sgs-quiz-portal",
        storageBucket: "sgs-quiz-portal.firebasestorage.app",
        messagingSenderId: "534812750253",
        appId: "1:534812750253:web:b0130fd726db348136b124",
        measurementId: "G-DF2RF7562J"
      };
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();
      window.db = firebase.firestore();
      window.auth = firebase.auth();
    }
  });
</script>
<script src="google-sheets-api.js" defer></script>
<script src="script.js" defer></script>
    <script>
        // Scroll to top on page load
        (function() {
            // Function to force scroll to top
            function scrollToTop() {
                // For modern browsers
                if (window.scrollTo) {
                    window.scrollTo(0, 0);
                }
                
                // For older browsers
                document.documentElement.scrollTop = 0;
                document.body.scrollTop = 0;
                
                // Extra scroll for good measure
                window.scroll(0, 0);
            }
            
            // Run on page load
            scrollToTop();
            
            // Run after a short delay to catch any late-loading content
            setTimeout(scrollToTop, 100);
            
            // Run again when the page is fully loaded
            window.addEventListener('load', scrollToTop);
            
            // Also scroll to top when the page is shown from bfcache (back/forward)
            window.addEventListener('pageshow', function(event) {
                if (event.persisted) {
                    scrollToTop();
                }
            });
            
            // Add a small delay and scroll one more time
            setTimeout(scrollToTop, 500);
        })();
    </script>
    <script>
        // Store all rankers globally for "See All" functionality
        let allQuizRankers = [];
        
        // Cache for top rankers to avoid repeated API calls
        let topRankersCache = null;
        let topRankersCacheTime = 0;
        const TOP_RANKERS_CACHE_DURATION = 3 * 60 * 1000; // 3 minutes
        
        // Helper function to render rankers (separated for caching)
        function renderTopRankers(uniqueStudents, rankersContainer, loadingElement) {
            if (!rankersContainer) return;
            
            // Show only top 3
            const top3Rankers = uniqueStudents.slice(0, 3);
            
            // Create rankers grid
            const rankersGrid = document.createElement('div');
            rankersGrid.className = 'rankers-grid';
            
            top3Rankers.forEach((result, index) => {
                const rankClass = index === 0 ? 'rank-1' : index === 1 ? 'rank-2' : 'rank-3';
                const medal = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : 'ü•â';
                
                const rankerCard = document.createElement('div');
                rankerCard.className = `ranker-card ${rankClass}`;
                rankerCard.innerHTML = `
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">${medal}</div>
                    <h3 style="color: #2c3e50; margin-bottom: 0.5rem;">${result.name}</h3>
                    <div style="background: linear-gradient(135deg, #2d8cf0, #1e3a8a); color: white; padding: 0.5rem 1rem; border-radius: 20px; margin-bottom: 1rem; font-weight: 600;">
                        Rank #${result.rank}
                    </div>
                    <p style="color: #64748b; margin-bottom: 0.5rem;">
                        <strong>${result.percentage}%</strong> in ${result.quizName}
                    </p>
                    <p style="color: #64748b; font-size: 0.9rem;">
                        Time: ${Math.floor((result.time || 0)/60)}:${((result.time || 0)%60).toString().padStart(2,'0')}
                    </p>
                `;
                rankersGrid.appendChild(rankerCard);
            });
            
            rankersContainer.innerHTML = '';
            rankersContainer.appendChild(rankersGrid);
            
            // Hide loading element
            if (loadingElement) {
                loadingElement.style.display = 'none';
            }
            
            // Add "See All Rankers" button if there are more than 3
            if (uniqueStudents.length > 3) {
                const seeAllBtn = document.createElement('div');
                seeAllBtn.style.textAlign = 'center';
                seeAllBtn.style.marginTop = '2rem';
                seeAllBtn.innerHTML = `
                    <button onclick="showAllQuizRankers()" style="
                        background: linear-gradient(135deg, #2d8cf0, #1e3a8a);
                        color: white;
                        padding: 0.75rem 2rem;
                        border: none;
                        border-radius: 50px;
                        font-weight: 600;
                        font-size: 1rem;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        box-shadow: 0 4px 15px rgba(45, 140, 240, 0.3);
                    " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 25px rgba(45, 140, 240, 0.4)';" 
                       onmouseout="this.style.transform='none'; this.style.boxShadow='0 4px 15px rgba(45, 140, 240, 0.3)';">
                        <i class="fas fa-trophy"></i> See All Rankers (${uniqueStudents.length})
                    </button>
                `;
                rankersContainer.appendChild(seeAllBtn);
            }
        }
        
        // Top Rankers Display Function (Updated to use Google Sheets with caching)
        async function displayTopRankers() {
            const rankersContainer = document.getElementById('rankersContainer');
            const loadingElement = document.getElementById('loadingRankers');
            
            // Hide loading element immediately
            if (loadingElement) {
                loadingElement.style.display = 'none';
            }
            
            // Check cache first
            const now = Date.now();
            if (topRankersCache && (now - topRankersCacheTime < TOP_RANKERS_CACHE_DURATION)) {
                renderTopRankers(topRankersCache, rankersContainer, loadingElement);
                return;
            }
            
            try {
                // Try to fetch from Google Sheets first
                let sheetsRankings = null;
                if (typeof fetchQuizRankingsFromSheets === 'function') {
                    try {
                        sheetsRankings = await fetchQuizRankingsFromSheets();
                    } catch (e) {
                        console.log('Could not fetch from Google Sheets, using local data:', e);
                    }
                }
                
                // Get local results as fallback
                const quizResults = JSON.parse(localStorage.getItem('quizResults') || '{}');
                let allResults = [];
                
                // Collect all quiz results from localStorage
                for (const quizKey in quizResults) {
                    const results = quizResults[quizKey];
                    results.forEach(result => {
                        const percentage = Math.round((result.score / result.total) * 100);
                        allResults.push({
                            ...result,
                            percentage: percentage,
                            quizName: quizKey.split('_')[0],
                            time: result.time || result.timeTaken || 0
                        });
                    });
                }
                
                // Merge with Google Sheets data if available
                if (sheetsRankings && sheetsRankings.length > 0) {
                    sheetsRankings.forEach(rank => {
                        allResults.push({
                            name: rank.name,
                            mobile: rank.mobile,
                            score: rank.score,
                            total: rank.totalQuestions,
                            percentage: rank.percentage,
                            time: rank.timeTaken,
                            quizName: rank.quizTitle || 'Quiz'
                        });
                    });
                }
                
                if (allResults.length === 0) {
                    if (rankersContainer) {
                    rankersContainer.innerHTML = `
                        <div style="text-align: center; padding: 40px; color: #64748b;">
                            <i class="fas fa-trophy" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.3;"></i>
                            <h3>No quiz results yet!</h3>
                            <p>Be the first to take a quiz and see your name here!</p>
                            <a href="quizzes.html" class="btn-primary" style="margin-top: 1rem;">Take First Quiz</a>
                        </div>
                    `;
                    }
                    if (loadingElement) loadingElement.style.display = 'none';
                    return;
                }
                
                // Sort by percentage (desc), then by time (asc)
                allResults.sort((a, b) => {
                    if (b.percentage !== a.percentage) return b.percentage - a.percentage;
                    return (a.time || 0) - (b.time || 0);
                });
                
                // Get all unique students (store globally)
                const uniqueStudents = [];
                const seenStudents = new Set();
                
                allResults.forEach(result => {
                    const studentKey = `${result.name}_${result.mobile}`;
                    if (!seenStudents.has(studentKey)) {
                        seenStudents.add(studentKey);
                        uniqueStudents.push({
                            ...result,
                            rank: uniqueStudents.length + 1
                        });
                    }
                });
                
                // Store all rankers for "See All" functionality
                allQuizRankers = uniqueStudents;
                
                // Update cache
                topRankersCache = uniqueStudents;
                topRankersCacheTime = Date.now();
                
                // Render rankers
                renderTopRankers(uniqueStudents, rankersContainer, loadingElement);
                
            } catch (error) {
                console.error('Error displaying top rankers:', error);
                if (loadingElement) loadingElement.style.display = 'none';
                if (rankersContainer) {
                rankersContainer.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #64748b;">
                        <p>Unable to load rankings. Take a quiz to see results!</p>
                        <a href="quizzes.html" class="btn-primary">Take Quiz Now</a>
                    </div>
                `;
            }
            }
        }
        
        // Function to show all quiz rankers in a modal (make it globally accessible)
        window.showAllQuizRankers = function() {
            if (allQuizRankers.length === 0) return;
            
            const modal = document.createElement('div');
            modal.id = 'allRankersModal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
                overflow-y: auto;
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: white;
                border-radius: 20px;
                padding: 2rem;
                max-width: 900px;
                width: 100%;
                max-height: 90vh;
                overflow-y: auto;
                position: relative;
            `;
            
            modalContent.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2 style="margin: 0; color: #2c3e50; font-size: 2rem;">
                        <i class="fas fa-trophy"></i> All Quiz Rankers
                    </h2>
                    <button onclick="document.getElementById('allRankersModal').remove()" style="
                        background: #ef4444;
                        color: white;
                        border: none;
                        border-radius: 50%;
                        width: 40px;
                        height: 40px;
                        font-size: 1.5rem;
                        cursor: pointer;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    ">&times;</button>
                </div>
                <div class="rankers-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1.5rem;">
                    ${allQuizRankers.map((result, index) => {
                        const rankClass = index === 0 ? 'rank-1' : index === 1 ? 'rank-2' : index === 2 ? 'rank-3' : '';
                        const medal = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : 'üèÜ';
                        return `
                            <div class="ranker-card ${rankClass}" style="
                                background: white;
                                padding: 1.5rem;
                                border-radius: 16px;
                                box-shadow: 0 4px 15px rgba(0,0,0,0.05);
                                text-align: center;
                                border: 2px solid ${index < 3 ? (index === 0 ? '#ffd700' : index === 1 ? '#c0c0c0' : '#cd7f32') : '#e2e8f0'};
                            ">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">${medal}</div>
                                <h3 style="color: #2c3e50; margin-bottom: 0.5rem; font-size: 1.1rem;">${result.name}</h3>
                                <div style="background: linear-gradient(135deg, #2d8cf0, #1e3a8a); color: white; padding: 0.5rem 1rem; border-radius: 20px; margin-bottom: 1rem; font-weight: 600; display: inline-block;">
                                    Rank #${result.rank}
                                </div>
                                <p style="color: #64748b; margin-bottom: 0.5rem; font-size: 0.9rem;">
                                    <strong>${result.percentage}%</strong> in ${result.quizName}
                                </p>
                                <p style="color: #64748b; font-size: 0.85rem;">
                                    Time: ${Math.floor((result.time || 0)/60)}:${((result.time || 0)%60).toString().padStart(2,'0')}
                                </p>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
            
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
            
            // Close on outside click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Star rating functionality
        function initializeStarRating() {
            const stars = document.querySelectorAll('.star');
            const ratingInput = document.getElementById('reviewRating');
            const ratingError = document.getElementById('ratingError');
            let currentRating = 0;
            
            // Set initial state
            function updateStars(rating) {
                stars.forEach(star => {
                    const starRating = parseInt(star.getAttribute('data-rating'));
                    if (starRating <= rating) {
                        star.style.color = '#FFD700';
                        star.style.textShadow = '0 0 5px rgba(255, 215, 0, 0.5)';
                    } else {
                        star.style.color = '#e2e8f0';
                        star.style.textShadow = 'none';
                    }
                });
                
                // Update hidden input
                ratingInput.value = rating;
                currentRating = rating;
                
                // Hide error if rating is selected
                if (rating > 0 && ratingError) {
                    ratingError.style.display = 'none';
                }
            }
            
            // Add event listeners
            stars.forEach(star => {
                star.addEventListener('click', () => {
                    const rating = parseInt(star.getAttribute('data-rating'));
                    updateStars(rating);
                });
                
                star.addEventListener('mouseover', (e) => {
                    const rating = parseInt(e.target.getAttribute('data-rating'));
                    stars.forEach(s => {
                        const sRating = parseInt(s.getAttribute('data-rating'));
                        if (sRating <= rating) {
                            s.style.color = '#FFD700';
                            s.style.transform = 'scale(1.1)';
                        }
                    });
                });
                
                star.addEventListener('mouseout', () => {
                    updateStars(currentRating);
                });
            });
            
            // Return validation function
            return function validateRating() {
                const isValid = currentRating > 0;
                if (!isValid && ratingError) {
                    ratingError.style.display = 'block';
                }
                return isValid;
            };
        }
        
        // Function to get star rating display
        function getStarRating(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            let stars = '';
            
            for (let i = 1; i <= 5; i++) {
                if (i <= fullStars) {
                    stars += '‚òÖ';
                } else if (i === fullStars + 1 && hasHalfStar) {
                    stars += '¬Ω';
                } else {
                    stars += '‚òÜ';
                }
            }
            
            return `<span style="color: #FFD700; letter-spacing: 2px; font-size: 1.2em;">${stars}</span>`;
        }

        // Function to save review to localStorage and Google Sheets
        async function saveReview(review) {
            try {
                // Generate initials from name
                const nameParts = review.name.trim().split(' ');
                review.initials = nameParts.length > 1 ? 
                    (nameParts[0].charAt(0) + nameParts[nameParts.length - 1].charAt(0)).toUpperCase() :
                    nameParts[0].substring(0, 2).toUpperCase();
                
                // Add timestamp to the review
                review.timestamp = new Date().getTime();
                
                // Save to Google Sheets
                if (typeof saveReviewToSheets === 'function') {
                    await saveReviewToSheets(review);
                }
                
                // Also save to localStorage as backup
                let reviews = [];
                const storedReviews = localStorage.getItem('studentReviews');
                if (storedReviews) {
                    reviews = JSON.parse(storedReviews);
                    // Filter out any default testimonials when adding a new review
                    reviews = reviews.filter(r => !r.isDefault);
                }
                
                // Add to the beginning of the array (newest first)
                reviews.unshift(review);
                
                // Combine with default testimonials (excluding any that might have been added before)
                const defaultReviews = defaultTestimonials.filter(dt => 
                    !reviews.some(r => r.text === dt.text) // Only add default if not already in reviews
                );
                
                const allReviews = [...reviews, ...defaultReviews];
                
                // Save back to localStorage
                localStorage.setItem('studentReviews', JSON.stringify(allReviews));
                return true;
            } catch (e) {
                console.error('Error saving review:', e);
                return false;
            }
        }

        // Testimonial Slider Functionality
        function initTestimonialSlider() {
            const slider = document.querySelector('.testimonials-slider');
            const track = document.querySelector('.testimonials-track');
            const prevBtn = document.querySelector('.testimonial-nav.prev');
            const nextBtn = document.querySelector('.testimonial-nav.next');
            const dotsContainer = document.querySelector('.testimonial-dots');
            
            if (!slider || !track) return;
            
            let currentSlide = 0;
            let slidesPerView = 1; // Show one review at a time
            let isDragging = false;
            let startPos = 0;
            let currentTranslate = 0;
            let prevTranslate = 0;
            let animationID;
            let slideInterval;
            const slideDuration = 4000; // 4 seconds per slide for better engagement
            
            // Always show one slide at a time
            function setSlidesPerView() {
                slidesPerView = 1;
                updateSliderPosition();
                startAutoSlide(); // Ensure auto-slide starts when view is set
            }
            
            // Create testimonial slide HTML
            function createSlideHTML(testimonial) {
                return `
                    <div class="testimonial-card" style="height: 100%;">
                        <div style="margin-bottom: 0.5rem; min-height: 24px;">
                            ${testimonial.rating ? getStarRating(testimonial.rating) + 
                            '<span style="color: #64748b; font-size: 0.9em; margin-left: 8px; vertical-align: middle;">' + 
                            testimonial.rating.toFixed(1) + '</span>' : ''}
                        </div>
                        <p class="testimonial-text">${testimonial.text}</p>
                        <div class="testimonial-author">
                            <div class="author-avatar">${testimonial.initials}</div>
                            <div class="author-info">
                                <h4>${testimonial.name}</h4>
                                <p>${testimonial.class}</p>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            // Create slides from reviews
            function createSlides(reviews) {
                track.innerHTML = '';
                dotsContainer.innerHTML = '';
                
                if (reviews.length === 0) {
                    reviews = [
                        {
                            name: 'Arjun Kumar',
                            class: 'Class 12 Student ‚Ä¢ 92% in Boards',
                            text: 'SGS Coaching transformed my understanding of Physics and Mathematics. The teachers explain complex concepts so clearly that even difficult topics become easy to understand.',
                            initials: 'AK',
                            rating: 4.8
                        },
                        {
                            name: 'Priya Sharma',
                            class: 'SSC CHSL Qualifier ‚Ä¢ Rank 1',
                            text: 'The quiz system here is amazing! It helped me identify my weak areas and improve them systematically. I secured first rank in SSC CHSL thanks to their guidance.',
                            initials: 'PS',
                            rating: 5.0
                        },
                        {
                            name: 'Rahul Gupta',
                            class: 'Class 10 Student ‚Ä¢ 95% in Maths',
                            text: 'Small batch sizes meant I got personal attention from teachers. They helped me overcome my fear of Mathematics and now it\'s my favorite subject!',
                            initials: 'RG',
                            rating: 4.9
                        },
                        {
                            name: 'Ananya Patel',
                            class: 'JEE Advanced ‚Ä¢ AIR 342',
                            text: 'The study material and test series at SGS are top-notch. Regular mock tests helped me manage time effectively during the actual JEE Advanced exam.',
                            initials: 'AP',
                            rating: 4.9
                        },
                        {
                            name: 'Vikram Singh',
                            class: 'NEET Aspirant ‚Ä¢ 680/720',
                            text: 'Biology faculty is exceptional here. Their teaching methods made learning complex biological processes so much easier. Highly recommended for NEET preparation!',
                            initials: 'VS',
                            rating: 4.7
                        },
                        {
                            name: 'Meera Desai',
                            class: 'Class 9 Student ‚Ä¢ 98% in SA1',
                            text: 'The foundation courses are excellent. I was weak in Science, but after joining SGS, I\'ve developed a strong conceptual understanding.',
                            initials: 'MD',
                            rating: 4.8
                        },
                        {
                            name: 'Rohit Malhotra',
                            class: 'SSC CGL ‚Ä¢ Selected as Tax Assistant',
                            text: 'Quantitative Aptitude classes are the best! Cleared SSC CGL in first attempt with good rank. Thank you SGS team for your guidance and support.',
                            initials: 'RM',
                            rating: 5.0
                        },
                        {
                            name: 'Neha Verma',
                            class: 'Class 11 Science ‚Ä¢ Improved by 35%',
                            text: 'The way they teach Chemistry makes it so interesting. I used to hate the subject, but now it\'s my strongest subject!',
                            initials: 'NV',
                            rating: 4.6
                        },
                        {
                            name: 'Amit Joshi',
                            class: 'Bank PO ‚Ä¢ Selected in SBI',
                            text: 'The reasoning and English faculty are exceptional. Their shortcuts and tricks saved me a lot of time during the exam. Grateful for their guidance!',
                            initials: 'AJ',
                            rating: 4.9
                        },
                        {
                            name: 'Sneha Iyer',
                            class: 'Class 10 Student ‚Ä¢ 97% in Boards',
                            text: 'The board exam preparation strategy was perfect. Regular tests and doubt-solving sessions helped me score above 95 in all subjects. Thank you SGS!',
                            initials: 'SI',
                            rating: 5.0
                        }
                    ];
                }
                
                // Create one slide per review
                const slides = [];
                reviews.forEach((review, index) => {
                    const slideHTML = `
                        <div class="testimonial-slide ${index === 0 ? 'active' : ''}" style="width: 100%;">
                            ${createSlideHTML(review)}
                        </div>
                    `;
                    slides.push(slideHTML);
                    
                    // Create dot for this slide
                    const dot = document.createElement('button');
                    dot.className = `testimonial-dot ${index === 0 ? 'active' : ''}`;
                    dot.setAttribute('data-index', index);
                    dot.addEventListener('click', () => goToSlide(index));
                    dotsContainer.appendChild(dot);
                });
                
                track.innerHTML = slides.join('');
                setSlidesPerView();
                startAutoSlide();
            }
            
            // Update slider position with smooth transition
            function updateSliderPosition() {
                track.style.transition = 'transform 0.5s ease-in-out';
                track.style.transform = `translateX(-${currentSlide * 100}%)`;
                
                // Update active dots
                const dots = document.querySelectorAll('.testimonial-dot');
                dots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === currentSlide);
                });
                
                // Update slide classes
                const slides = document.querySelectorAll('.testimonial-slide');
                slides.forEach((slide, index) => {
                    if (index === currentSlide) {
                        slide.classList.add('active');
                    } else {
                        slide.classList.remove('active');
                    }
                });
                
                // Reset transition after animation completes
                setTimeout(() => {
                    track.style.transition = 'transform 0.5s ease-in-out';
                }, 500);
            }
            
            // Go to specific slide
            function goToSlide(slideIndex) {
                const slides = document.querySelectorAll('.testimonial-slide');
                if (slideIndex < 0) {
                    currentSlide = slides.length - 1;
                } else if (slideIndex >= slides.length) {
                    currentSlide = 0;
                } else {
                    currentSlide = slideIndex;
                }
                updateSliderPosition();
                resetAutoSlide();
            }
            
            // Navigate to next/previous slide
            function nextSlide() {
                goToSlide(currentSlide + 1);
            }
            
            function prevSlide() {
                goToSlide(currentSlide - 1);
            }
            
            // Auto slide functionality with smooth transitions
            function startAutoSlide() {
                stopAutoSlide();
                slideInterval = setInterval(() => {
                    nextSlide();
                }, slideDuration);
                
                // Add animation class for smooth transition
                track.style.transition = 'transform 0.7s cubic-bezier(0.4, 0, 0.2, 1)';
            }
            
            function stopAutoSlide() {
                if (slideInterval) {
                    clearInterval(slideInterval);
                }
            }
            
            function resetAutoSlide() {
                stopAutoSlide();
                startAutoSlide();
            }
            
            // Touch event handlers for swipe
            function touchStart(index) {
                return function(e) {
                    isDragging = true;
                    startPos = e.type.includes('mouse') ? e.pageX : e.touches[0].clientX;
                    prevTranslate = currentTranslate;
                    track.style.transition = 'none';
                    cancelAnimationFrame(animationID);
                    stopAutoSlide();
                };
            }
            
            function touchMove(e) {
                if (!isDragging) return;
                const currentPosition = e.type.includes('mouse') ? e.pageX : e.touches[0].clientX;
                const diff = currentPosition - startPos;
                currentTranslate = prevTranslate + diff;
                track.style.transform = `translateX(calc(-${currentSlide * 100}% + ${diff}px))`;
            }
            
            function touchEnd() {
                if (!isDragging) return;
                isDragging = false;
                track.style.transition = 'transform 0.3s ease-in-out';
                
                const movedBy = currentTranslate - prevTranslate;
                if (Math.abs(movedBy) > 50) {
                    if (movedBy > 0) {
                        prevSlide();
                    } else {
                        nextSlide();
                    }
                } else {
                    updateSliderPosition();
                }
                
                startAutoSlide();
            }
            
            // Event listeners
            if (prevBtn) prevBtn.addEventListener('click', prevSlide);
            if (nextBtn) nextBtn.addEventListener('click', nextSlide);
            
            // Touch events for mobile
            track.addEventListener('touchstart', touchStart(), { passive: true });
            track.addEventListener('touchmove', touchMove, { passive: false });
            track.addEventListener('touchend', touchEnd);
            
            // Mouse events for desktop
            track.addEventListener('mousedown', touchStart());
            window.addEventListener('mousemove', touchMove);
            window.addEventListener('mouseup', touchEnd);
            
            // Handle window resize
            window.addEventListener('resize', setSlidesPerView);
            
            // Pause auto-slide on hover
            slider.addEventListener('mouseenter', stopAutoSlide);
            slider.addEventListener('mouseleave', startAutoSlide);
            
            // Initialize with empty array, will be populated by loadReviews
            return {
                createSlides,
                nextSlide,
                prevSlide,
                goToSlide
            };
        }
        
        // Initialize the slider (global variable)
        let testimonialSlider = null;
        
        // Default testimonials data
        const defaultTestimonials = [
            {
                name: 'Arjun Kumar',
                class: 'Class 12 Student ‚Ä¢ 92% in Boards',
                text: 'SGS Coaching transformed my understanding of Physics and Mathematics. The teachers explain complex concepts so clearly that even difficult topics become easy to understand.',
                initials: 'AK',
                rating: 4.8,
                timestamp: new Date('2023-01-15').getTime(),
                isDefault: true
            },
            {
                name: 'Priya Sharma',
                class: 'SSC CHSL Qualifier ‚Ä¢ Rank 1',
                text: 'The quiz system here is amazing! It helped me identify my weak areas and improve them systematically. I secured first rank in SSC CHSL thanks to their guidance.',
                initials: 'PS',
                rating: 5.0,
                timestamp: new Date('2023-02-20').getTime(),
                isDefault: true
            },
            {
                name: 'Rahul Gupta',
                class: 'Class 10 Student ‚Ä¢ 95% in Maths',
                text: 'Small batch sizes meant I got personal attention from teachers. They helped me overcome my fear of Mathematics and now it\'s my favorite subject!',
                initials: 'RG',
                rating: 4.9,
                timestamp: new Date('2023-03-05').getTime(),
                isDefault: true
            },
            {
                name: 'Ananya Patel',
                class: 'JEE Advanced ‚Ä¢ AIR 342',
                text: 'The study material and test series at SGS are top-notch. Regular mock tests helped me manage time effectively during the actual JEE Advanced exam.',
                initials: 'AP',
                rating: 4.9,
                timestamp: new Date('2023-01-28').getTime(),
                isDefault: true
            },
            {
                name: 'Vikram Singh',
                class: 'NEET Aspirant ‚Ä¢ 680/720',
                text: 'Biology faculty is exceptional here. Their teaching methods made learning complex biological processes so much easier. Highly recommended for NEET preparation!',
                initials: 'VS',
                rating: 4.7,
                timestamp: new Date('2023-02-10').getTime(),
                isDefault: true
            },
            {
                name: 'Meera Desai',
                class: 'Class 9 Student ‚Ä¢ 98% in SA1',
                text: 'The foundation courses are excellent. I was weak in Science, but after joining SGS, I\'ve developed a strong conceptual understanding.',
                initials: 'MD',
                rating: 4.8,
                timestamp: new Date('2023-03-15').getTime(),
                isDefault: true
            },
            {
                name: 'Rohit Malhotra',
                class: 'SSC CGL ‚Ä¢ Selected as Tax Assistant',
                text: 'Quantitative Aptitude classes are the best! Cleared SSC CGL in first attempt with good rank. Thank you SGS team for your guidance and support.',
                initials: 'RM',
                rating: 5.0,
                timestamp: new Date('2023-02-28').getTime(),
                isDefault: true
            },
            {
                name: 'Neha Verma',
                class: 'Class 11 Science ‚Ä¢ Improved by 35%',
                text: 'The way they teach Chemistry makes it so interesting. I used to hate the subject, but now it\'s my strongest subject!',
                initials: 'NV',
                rating: 4.6,
                timestamp: new Date('2023-03-10').getTime(),
                isDefault: true
            },
            {
                name: 'Amit Joshi',
                class: 'Bank PO ‚Ä¢ Selected in SBI',
                text: 'The reasoning and English faculty are exceptional. Their shortcuts and tricks saved me a lot of time during the exam. Grateful for their guidance!',
                initials: 'AJ',
                rating: 4.9,
                timestamp: new Date('2023-01-20').getTime(),
                isDefault: true
            },
            {
                name: 'Sneha Iyer',
                class: 'Class 10 Student ‚Ä¢ 97% in Boards',
                text: 'The board exam preparation strategy was perfect. Regular tests and doubt-solving sessions helped me score above 95 in all subjects. Thank you SGS!',
                initials: 'SI',
                rating: 5.0,
                timestamp: new Date('2023-03-01').getTime(),
                isDefault: true
            }
        ];

        // Function to load and display reviews from Google Sheets and localStorage
        async function loadReviews() {
            try {
                const sliderContainer = document.querySelector('.testimonials-slider .testimonials-track');
                if (!sliderContainer) return;
                
                // Clear existing slides
                sliderContainer.innerHTML = '';
                
                let reviews = [];
                
                // Try to fetch from Google Sheets first
                let sheetsReviews = null;
                if (typeof fetchReviewsFromSheets === 'function') {
                    try {
                        sheetsReviews = await fetchReviewsFromSheets();
                    } catch (e) {
                        console.log('Could not fetch from Google Sheets, using local data:', e);
                    }
                }
                
                // Get local reviews as fallback
                const storedReviews = localStorage.getItem('studentReviews');
                if (storedReviews) {
                    reviews = JSON.parse(storedReviews);
                }
                
                // Merge with Google Sheets data if available
                if (sheetsReviews && sheetsReviews.length > 0) {
                    // Convert sheets reviews to same format
                    const formattedSheetsReviews = sheetsReviews.map(r => ({
                        name: r.name,
                        class: r.class,
                        text: r.text,
                        rating: r.rating,
                        initials: r.initials,
                        timestamp: r.timestamp,
                        date: r.date
                    }));
                    
                    // Combine and remove duplicates
                    const allReviews = [...formattedSheetsReviews, ...reviews];
                    const seen = new Set();
                    reviews = [];
                    
                    for (const review of allReviews) {
                        const key = `${review.name}_${review.text}_${review.timestamp}`;
                        if (!seen.has(key)) {
                            seen.add(key);
                            reviews.push(review);
                        }
                    }
                }
                
                // If no reviews, use default testimonials
                if (reviews.length === 0) {
                    reviews = [...defaultTestimonials];
                    // Don't save defaults to localStorage, just use them for display
                }
                
                // Sort all reviews by timestamp (newest first)
                reviews.sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0));
                
                // Pass reviews to the slider
                if (!testimonialSlider) {
                    testimonialSlider = initTestimonialSlider();
                }
                
                if (testimonialSlider && testimonialSlider.createSlides) {
                    testimonialSlider.createSlides(reviews);
                }
                
                // Ensure the slider is visible
                const sliderWrapper = document.querySelector('.testimonials-slider');
                if (sliderWrapper) {
                    sliderWrapper.style.display = 'block';
                }
                
            } catch (e) {
                console.error('Error loading reviews:', e);
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the slider first
            testimonialSlider = initTestimonialSlider();
            
            displayTopRankers();
            loadReviews();
            
            // Initialize star rating - wait a bit for DOM to be ready
            setTimeout(() => {
            const validateRating = initializeStarRating();
                window.validateReviewRating = validateRating; // Make it globally accessible
            }, 100);
            
            // Handle review form submission
            const reviewForm = document.getElementById('reviewForm');
            const formSuccess = document.getElementById('formSuccess');
            
            if (reviewForm) {
                reviewForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    // Validate rating - use global function or initialize if needed
                    let validateRating = window.validateReviewRating;
                    if (!validateRating) {
                        validateRating = initializeStarRating();
                        window.validateReviewRating = validateRating;
                    }
                    
                    if (!validateRating()) {
                        return;
                    }
                    
                    const review = {
                        name: document.getElementById('reviewerName').value.trim(),
                        class: document.getElementById('reviewerClass').value.trim(),
                        text: document.getElementById('reviewText').value.trim(),
                        rating: parseInt(document.getElementById('reviewRating').value)
                    };
                    
                    // Show loading state
                    const submitBtn = reviewForm.querySelector('button[type="submit"]');
                    const originalBtnText = submitBtn ? submitBtn.innerHTML : '';
                    if (submitBtn) {
                        submitBtn.disabled = true;
                        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting...';
                    }
                    
                    try {
                        // Save review (async)
                        const saved = await saveReview(review);
                        
                        if (saved) {
                        // Show success message
                        reviewForm.style.display = 'none';
                            if (formSuccess) formSuccess.style.display = 'block';
                        
                            // Reset form and rating
                        reviewForm.reset();
                            document.getElementById('reviewRating').value = '0';
                            const stars = document.querySelectorAll('.star');
                            stars.forEach(star => {
                                star.style.color = '#e2e8f0';
                                star.style.textShadow = 'none';
                            });
                            
                            // Reload reviews immediately
                            await loadReviews();
                            
                            // Scroll to testimonials
                        setTimeout(() => {
                                const testimonialsSection = document.querySelector('.testimonials');
                                if (testimonialsSection) {
                            window.scrollTo({
                                        top: testimonialsSection.offsetTop - 100,
                                behavior: 'smooth'
                            });
                                }
                            }, 500);
                        } else {
                            // Restore button
                            if (submitBtn) {
                                submitBtn.disabled = false;
                                submitBtn.innerHTML = originalBtnText;
                            }
                            alert('There was an error saving your review. Please try again.');
                        }
                    } catch (error) {
                        console.error('Error submitting review:', error);
                        if (submitBtn) {
                            submitBtn.disabled = false;
                            submitBtn.innerHTML = originalBtnText;
                        }
                        alert('There was an error saving your review. Please try again.');
                    }
                });
            }
            
            // Add scroll effect to navigation
            const nav = document.querySelector('nav');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 100) {
                    nav.style.background = 'rgba(255, 255, 255, 0.98)';
                    nav.style.boxShadow = '0 2px 25px rgba(0,0,0,0.15)';
                } else {
                    nav.style.background = 'rgba(255, 255, 255, 0.95)';
                    nav.style.boxShadow = '0 2px 20px rgba(0,0,0,0.1)';
                }
            });

            // Refresh rankings every 30 seconds
            setInterval(displayTopRankers, 30000);

            // Scroll-in animation for syllabus cards and preview
            const syllabusCards = document.querySelectorAll('.syllabus-mini-card');
            const syllabusPreview = document.querySelector('.syllabus-preview-card');

            if ('IntersectionObserver' in window) {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                            observer.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.2 });

                syllabusCards.forEach(card => observer.observe(card));
                if (syllabusPreview) observer.observe(syllabusPreview);
            } else {
                // Fallback: make them visible without animation
                syllabusCards.forEach(card => card.classList.add('visible'));
                if (syllabusPreview) syllabusPreview.classList.add('visible');
            }
        });
        
    </script>
</body>
</html>
